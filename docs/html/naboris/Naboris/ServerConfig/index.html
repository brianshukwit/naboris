<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ServerConfig (naboris.Naboris.ServerConfig)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">naboris</a> &#x00BB; <a href="../index.html">Naboris</a> &#x00BB; ServerConfig</nav><h1>Module <code>Naboris.ServerConfig</code></h1><p>Module for configuring the naboris http server.</p></header><aside></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'sessionData t</span></code></dt><dt class="spec type" id="type-httpAfConfig"><a href="#type-httpAfConfig" class="anchor"></a><code><span class="keyword">type</span> httpAfConfig</code><code> = </code><code>{</code><table class="record"><tr id="type-httpAfConfig.read_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.read_buffer_size" class="anchor"></a><code>read_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.request_body_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.request_body_buffer_size" class="anchor"></a><code>request_body_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.response_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.response_buffer_size" class="anchor"></a><code>response_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.response_body_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.response_body_buffer_size" class="anchor"></a><code>response_body_buffer_size : int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Returns default config. Used as the starting place to build the config.</p></dd></dl><dl><dt class="spec value" id="val-setOnListen"><a href="#val-setOnListen" class="anchor"></a><code><span class="keyword">val</span> setOnListen : <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Create new config from <code>t('sessionData)</code> with the onListen function <code>unit =&gt; unit</code>.</p><p><code>onListen</code> function is called once the server is created successfully.</p></dd></dl><dl><dt class="spec value" id="val-setSessionConfig"><a href="#val-setSessionConfig" class="anchor"></a><code><span class="keyword">val</span> setSessionConfig : <span>?&#8288;maxAge:int</span> <span>&#45;&gt;</span> <span>?&#8288;sidKey:string</span> <span>&#45;&gt;</span> <span>(<span>string option</span> <span>&#45;&gt;</span> <span><span><span><span class="type-var">'sessionData</span> <a href="../Session/index.html#type-t">Session.t</a></span> option</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates new config from <code>t('sessionData)</code> with mapSession function <code>option(string) =&gt; Lwt.t(option(Session.t('sessionData)))</code>.</p><p><code>mapSession</code> function is called at the very beginning of each request/response lifecycle. Used to set session data into the <code>Req.t('sessionData)</code> for use later in the request/response lifecycle.</p><p><code>~maxAge</code> Optional param to set max age for session cookies in seconds (defaults to 30 days) <code>~sidKey</code> Optional param to set key for session cookies (defaults to <code>&quot;nab.sid&quot;</code>)</p></dd></dl><dl><dt class="spec value" id="val-setRequestHandler"><a href="#val-setRequestHandler" class="anchor"></a><code><span class="keyword">val</span> setRequestHandler : <span>(<a href="../Route/index.html#type-t">Route.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="../Req/index.html#type-t">Req.t</a></span> <span>&#45;&gt;</span> <a href="../Res/index.html#type-t">Res.t</a> <span>&#45;&gt;</span> <span><a href="../Res/index.html#type-t">Res.t</a> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates new config from <code>t('sessionData)</code> with requestHandler <code>(Route.t, Req.t('sessionData), Res.t) =&gt; Lwt.t(Res.t)</code>.</p><p><code>requestHandler</code> is the main handler function for responding to incoming http requests.</p></dd></dl><dl><dt class="spec value" id="val-setErrorHandler"><a href="#val-setErrorHandler" class="anchor"></a><code><span class="keyword">val</span> setErrorHandler : <a href="../../Naboris__/ErrorHandler/index.html#type-t">Naboris__.ErrorHandler.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates new config from <code>t('sessionData)</code> with errorHandler <code>ErrorHandler.t</code>.</p></dd></dl><dl><dt class="spec value" id="val-setHttpAfConfig"><a href="#val-setHttpAfConfig" class="anchor"></a><code><span class="keyword">val</span> setHttpAfConfig : <a href="index.html#type-httpAfConfig">httpAfConfig</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates new config from <code>t('sessionData)</code> with httpAfConfig <code>httpAfConfig</code>.</p></dd></dl><dl><dt class="spec value" id="val-addMiddleware"><a href="#val-addMiddleware" class="anchor"></a><code><span class="keyword">val</span> addMiddleware : <span><span class="type-var">'sessionData</span> <a href="../../Naboris__/Middleware/index.html#type-t">Naboris__.Middleware.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates nwe config from <code>t('sessionData)</code> with the added middleware <code>Middleware.t('sessionData)</code>.</p><p>Middlewares are executed in the order they are added. The final &quot;middleware&quot; is the <code>requestHandler</code>.</p></dd></dl><dl><dt class="spec value" id="val-addStaticMiddleware"><a href="#val-addStaticMiddleware" class="anchor"></a><code><span class="keyword">val</span> addStaticMiddleware : <span>string list</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates a virtual path prefix <code>list(string)</code> and maps it to a local directory <code>string</code>.</p><p>Middlewares are executed in the order they are added. The final &quot;middleware&quot; is the <code>requestHandler</code>.</p></dd></dl><dl><dt class="spec value" id="val-sessionConfig"><a href="#val-sessionConfig" class="anchor"></a><code><span class="keyword">val</span> sessionConfig : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'sessionData</span> <a href="../SessionConfig/index.html#type-t">SessionConfig.t</a></span> option</span></code></dt><dd><p>Returns <code>SessionConfig.t('sessionData)</code> from config. <code>None</code> if none is configured.</p></dd></dl><dl><dt class="spec value" id="val-middlewares"><a href="#val-middlewares" class="anchor"></a><code><span class="keyword">val</span> middlewares : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'sessionData</span> <a href="../../Naboris__/Middleware/index.html#type-t">Naboris__.Middleware.t</a></span> list</span></code></dt><dd><p>Returns list of middlewares from the config.</p></dd></dl><dl><dt class="spec value" id="val-onListen"><a href="#val-onListen" class="anchor"></a><code><span class="keyword">val</span> onListen : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Returns <code>onListen</code> function of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-routeRequest"><a href="#val-routeRequest" class="anchor"></a><code><span class="keyword">val</span> routeRequest : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="../Route/index.html#type-t">Route.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="../Req/index.html#type-t">Req.t</a></span> <span>&#45;&gt;</span> <a href="../Res/index.html#type-t">Res.t</a> <span>&#45;&gt;</span> <span><a href="../Res/index.html#type-t">Res.t</a> Lwt.t</span></code></dt><dd><p>Returns <code>routeRequest</code> function of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-errorHandler"><a href="#val-errorHandler" class="anchor"></a><code><span class="keyword">val</span> errorHandler : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><a href="../../Naboris__/ErrorHandler/index.html#type-t">Naboris__.ErrorHandler.t</a> option</span></code></dt><dd><p>Returns <code>option(ErrorHandler.t)</code> of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-httpAfConfig"><a href="#val-httpAfConfig" class="anchor"></a><code><span class="keyword">val</span> httpAfConfig : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>Httpaf.Config.t option</span></code></dt><dd><p>Returns <code>option(HttpAf.Config.t)</code> of <code>t</code>.</p></dd></dl></div></body></html>