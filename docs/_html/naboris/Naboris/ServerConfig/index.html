<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ServerConfig (naboris.Naboris.ServerConfig)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">naboris</a> &#x00BB; <a href="../index.html">Naboris</a> &#x00BB; ServerConfig</nav><h1>Module <code>Naboris.ServerConfig</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'sessionData t</span></code></dt><dt class="spec type" id="type-sessionConfig"><a href="#type-sessionConfig" class="anchor"></a><code><span class="keyword">type</span> <span>'sessionData sessionConfig</span></code><code> = </code><code>{</code><table class="record"><tr id="type-sessionConfig.getSession" class="anchored"><td class="def field"><a href="#type-sessionConfig.getSession" class="anchor"></a><code>getSession : <span>string option</span> <span>&#45;&gt;</span> <span><span><span><span class="type-var">'sessionData</span> <a href="../Session/index.html#type-t">Session.t</a></span> option</span> Lwt.t</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-httpAfConfig"><a href="#type-httpAfConfig" class="anchor"></a><code><span class="keyword">type</span> httpAfConfig</code><code> = </code><code>{</code><table class="record"><tr id="type-httpAfConfig.read_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.read_buffer_size" class="anchor"></a><code>read_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.request_body_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.request_body_buffer_size" class="anchor"></a><code>request_body_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.response_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.response_buffer_size" class="anchor"></a><code>response_buffer_size : int;</code></td></tr><tr id="type-httpAfConfig.response_body_buffer_size" class="anchored"><td class="def field"><a href="#type-httpAfConfig.response_body_buffer_size" class="anchor"></a><code>response_body_buffer_size : int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Returns default config. Used as the starting place to build the config.</p></dd></dl><dl><dt class="spec value" id="val-setOnListen"><a href="#val-setOnListen" class="anchor"></a><code><span class="keyword">val</span> setOnListen : <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Create new config from `t('sessionData)` with the onListen function `unit =&gt; unit`. * * `onListen` function is called once the server is created successfully.</p></dd></dl><dl><dt class="spec value" id="val-setSessionGetter"><a href="#val-setSessionGetter" class="anchor"></a><code><span class="keyword">val</span> setSessionGetter : <span>(<span>string option</span> <span>&#45;&gt;</span> <span><span><span><span class="type-var">'sessionData</span> <a href="../Session/index.html#type-t">Session.t</a></span> option</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Creates new config from `t('sessionData)` with sessionGetter function `option(string) =&gt; Lwt.t(option(Session.t('sessionData)))`. * * `sessionGetter` function is called at the very beginning of each request/response lifecycle. * Used to set session data into the `Req.t('sessionData)` for use later in the request/response lifecycle.</p></dd></dl><dl><dt class="spec value" id="val-setRequestHandler"><a href="#val-setRequestHandler" class="anchor"></a><code><span class="keyword">val</span> setRequestHandler : <span>(<a href="../Route/index.html#type-t">Route.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="../Req/index.html#type-t">Req.t</a></span> <span>&#45;&gt;</span> <a href="../Res/index.html#type-t">Res.t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Creates new config from `t('sessionData)` with requestHandler `(Route.t, Req.t('sessionData), Res.t) =&gt; Lwt.t(unit)`. * * `requestHandler` is the main handler function for responding to incoming http requests.</p></dd></dl><dl><dt class="spec value" id="val-setErrorHandler"><a href="#val-setErrorHandler" class="anchor"></a><code><span class="keyword">val</span> setErrorHandler : <a href="../../Naboris__/ErrorHandler/index.html#type-t">Naboris__.ErrorHandler.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Creates new config from `t('sessionData)` with errorHandler `ErrorHandler.t`.</p></dd></dl><dl><dt class="spec value" id="val-setHttpAfConfig"><a href="#val-setHttpAfConfig" class="anchor"></a><code><span class="keyword">val</span> setHttpAfConfig : <a href="index.html#type-httpAfConfig">httpAfConfig</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Creates new config from `t('sessionData)` with httpAfConfig `httpAfConfig`.</p></dd></dl><dl><dt class="spec value" id="val-addMiddleware"><a href="#val-addMiddleware" class="anchor"></a><code><span class="keyword">val</span> addMiddleware : <span><span class="type-var">'sessionData</span> <a href="../../Naboris__/Middleware/index.html#type-t">Naboris__.Middleware.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>* Creates nwe config from `t('sessionData)` with the added middleware `Middleware.t('sessionData)`. * * Middlewares are executed in the order they are added. The final &quot;middleware&quot; is the `requestHandler`.</p></dd></dl><dl><dt class="spec value" id="val-sessionConfig"><a href="#val-sessionConfig" class="anchor"></a><code><span class="keyword">val</span> sessionConfig : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'sessionData</span> <a href="index.html#type-sessionConfig">sessionConfig</a></span> option</span></code></dt><dd><p>* Returns `sessionConfig('sessionData)` from config. * `None` if none is configured.</p></dd></dl><dl><dt class="spec value" id="val-middlewares"><a href="#val-middlewares" class="anchor"></a><code><span class="keyword">val</span> middlewares : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'sessionData</span> <a href="../../Naboris__/Middleware/index.html#type-t">Naboris__.Middleware.t</a></span> list</span></code></dt><dd><p>* Returns list of middlewares from the config.</p></dd></dl><dl><dt class="spec value" id="val-onListen"><a href="#val-onListen" class="anchor"></a><code><span class="keyword">val</span> onListen : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>* Returns `onListen` function of `t`.</p></dd></dl><dl><dt class="spec value" id="val-routeRequest"><a href="#val-routeRequest" class="anchor"></a><code><span class="keyword">val</span> routeRequest : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="../Route/index.html#type-t">Route.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'sessionData</span> <a href="../Req/index.html#type-t">Req.t</a></span> <span>&#45;&gt;</span> <a href="../Res/index.html#type-t">Res.t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p>* Returns `routeRequest` function of `t`.</p></dd></dl><dl><dt class="spec value" id="val-errorHandler"><a href="#val-errorHandler" class="anchor"></a><code><span class="keyword">val</span> errorHandler : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><a href="../../Naboris__/ErrorHandler/index.html#type-t">Naboris__.ErrorHandler.t</a> option</span></code></dt><dd><p>* Returns `option(ErrorHandler.t)` of `t`.</p></dd></dl><dl><dt class="spec value" id="val-httpAfConfig"><a href="#val-httpAfConfig" class="anchor"></a><code><span class="keyword">val</span> httpAfConfig : <span><span class="type-var">'sessionData</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>Httpaf.Config.t option</span></code></dt><dd><p>* Returns `option(HttpAf.Config.t)` of `t`.</p></dd></dl></div></body></html>